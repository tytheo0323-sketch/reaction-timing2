<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>반사신경 테스트 - 메인</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='sikbbang.css') }}">
</head>
<body>
<main class="container">
  <h1>⚡ 반사신경 테스트</h1>

  <section class="toolbar">
    <div class="modes">
      <span class="label">측정 횟수:</span>
      {% for n in [5,7,10,15,20] %}
        <a class="btn mode" href="/test?tries={{n}}" onclick="saveNick()">{{n}}회</a>
      {% endfor %}
    </div>
    <div class="who">
      <label>닉네임 <input id="nick" type="text" placeholder="이름(선택)"></label>
    </div>
  </section>

  <p class="muted">횟수를 누르면 테스트 화면으로 이동합니다.</p>

  <section class="card">
    <h2>리더보드 🏆 (상위 10)</h2>
    <table class="table"><thead>
      <tr><th>순위</th><th>이름</th><th>평균(ms)</th><th>횟수</th><th>날짜</th></tr>
    </thead><tbody id="boardBody"></tbody></table>
  </section>
</main>

<script>
function saveNick(){ sessionStorage.setItem('rt_nick', document.getElementById('nick').value||''); }
const t=document.getElementById('boardBody');const k='rt_board';
try{const d=(JSON.parse(localStorage.getItem(k)||'[]')||[])
 .sort((a,b)=>a.avg-b.avg||a.time.localeCompare(b.time)).slice(0,10);
 t.innerHTML=d.length?d.map((r,i)=>`<tr><td>${i+1}</td><td>${r.name||'익명'}</td><td>${r.avg}</td><td>${r.tries}</td><td>${r.time}</td></tr>`).join('')
 :'<tr><td colspan="5">아직 기록이 없습니다.</td></tr>';}catch{t.innerHTML='<tr><td colspan="5">아직 기록이 없습니다.</td></tr>';}
</script>
</body>
</html>
